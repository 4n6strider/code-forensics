<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <link rel="stylesheet/less" media="screen, projection" type="text/css" href="styles/main.less" />
</head>
<body>

<div id="container">
  <div class="report-info">
    <span class="title" data-bind="text: metadata.title"></span>
    <span class="description" data-bind="text: metadata.description"></span>
  </div>
  <div class="report-controls">
    <h2 data-bind="text: metadata.diagramSelectionTitle"></h2>
    <div class="diagram-selection" data-bind="foreach: graphModels">
      <div>
        <input type="radio" data-bind="attr: {name: id, checked: isSelected}">
        <label data-bind="text: label, attr: {for: id}, click: $root.controller.selectGraph"></label>
      </div>
    </div>
    <div data-bind="foreach: graphModels">
      <div data-bind="if: controlsTemplateId &amp;&amp; isSelected">
        <div data-bind="template: {name: controlsTemplateId}"></div>
      </div>
    </div>
  </div>
  <div class="graph-content" data-bind="foreach: graphModels">
    <div class="graph-container" data-bind="attr: {id: id}, css: {showing: isSelected}">
      <div data-bind="if: diagram.hasData">
        <div class="graph" data-bind="css: diagramType"></div>
      </div>
      <div data-bind="ifnot: diagram.hasData" class="msg-large">No data available.</div>
    </div>
  </div>
</div>

<script type="text/html" id="hotspot-control-template">
  <h2>Filters</h2>
  <div data-bind="foreach: diagram.rangeFilters">
    <p class="metric-filter"><span data-bind="text: label"></span> <output data-bind="text: displayValue"></output></p>
    <div class="slider">
      <input class="bar" type="range" name="size-range" data-bind="textInput: inputContinuousValue, value:inputChangeValue"/>
    </div>
  </div>
</script>

<script src="/lib/less/dist/less.min.js"></script>
<script src="/lib/lodash/lodash.js"></script>
<script src="/lib/knockout/build/output/knockout-latest.js"></script>
<script src="/lib/q/q.js"></script>
<script src="/lib/d3/d3.min.js"></script>
<script src="/lib/d3-cloud/build/d3.layout.cloud.js"></script>
<script src="/lib/d3-tip/index.js"></script>
<script src="javascript/query_parameter.js"></script>
<script src="javascript/view_model.js"></script>
<script src="javascript/graph_controller.js"></script>
<script src="javascript/graph_model.js"></script>
<script src="javascript/diagrams/circle_packing_diagram.js"></script>
<script src="javascript/diagrams/line_chart_diagram.js"></script>
<script src="javascript/diagrams/bar_chart_diagram.js"></script>
<script src="javascript/diagrams/word_cloud_diagram.js"></script>
<script src="javascript/filters/range_filters.js"></script>
<script src="javascript/graph-types/complexity-trend.js"></script>
<script src="javascript/graph-types/hotspot-analysis.js"></script>
<script src="javascript/graph-types/temporal-coupling.js"></script>
<script src="javascript/graph-types/system-code-evolution.js"></script>
<script src="javascript/graph-types/commit-cloud.js"></script>

<script>
(function() {
  var viewModel = new CodeForensics.ViewModel(CodeForensics.QueryParameter.fromRequestUrl());
  ko.applyBindings(viewModel);
  window.viewModel = viewModel; //for debugging purposes
})();
</script>
</body>
</html>
