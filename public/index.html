<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <link rel="stylesheet/less" media="screen, projection" type="text/css" href="styles/main.less" />
</head>
<body>

<div id="container">
  <div class="report-info">
    <span class="title" data-bind="text: metadata.title"></span>
    <span class="description" data-bind="text: metadata.description"></span>
  </div>
  <div class="report-controls">
    <h2 data-bind="text: metadata.diagramSelectionTitle"></h2>
    <div class="diagram-selection" data-bind="foreach: graphModels">
      <div>
        <input type="radio" data-bind="attr: {name: id, checked: isSelected}">
        <label data-bind="text: label, attr: {for: id}, click: $root.controller.selectGraph"></label>
      </div>
    </div>
    <div data-bind="foreach: graphModels">
      <div data-bind="if: controlsTemplateId &amp;&amp; isSelected">
        <div data-bind="template: {name: controlsTemplateId}"></div>
      </div>
    </div>
  </div>
  <div class="graph-content" data-bind="foreach: graphModels">
    <div class="graph-container" data-bind="css: {showing: isSelected}">
      <div data-bind="visible: diagram.hasData">
        <div class="graph" data-bind="attr: {id: id}, css: diagramType"></div>
      </div>
      <div data-bind="visible: !diagram.hasData()" class="msg-large">No data available.</div>
    </div>
  </div>
</div>

<div id="templates"></div>
<script src="/lib/less/dist/less.min.js"></script>
<script src="/lib/systemjs/dist/system.js"></script>
<script>
(function() {
  System.config({
    map: {
      lodash:   '/lib/lodash/lodash.js',
      knockout: '/lib/knockout/build/output/knockout-latest.js',
      q:        '/lib/q/q.js',
      mustache: '/lib/mustache/mustache.min.js',
      d3:       '/lib/d3/d3.min.js',
      d3Cloud:  '/lib/d3-cloud/build/d3.layout.cloud.js',
      d3Tip:    '/lib/d3-tip/index.js',
    },
    meta: {
      'd3': { format: 'global' },
      'd3Tip': { format: 'global', deps: ['d3'] },
      'd3Cloud': { format: 'global', deps: ['d3'] }
    }
  });
  System.import('/js/main.js').then(function(module) { module.run(); });
})();
</script>
</body>
</html>
